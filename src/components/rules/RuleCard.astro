---
import { Rule } from "../../types/rules";

interface Props {
  rule: Rule;
  showFullDetails?: boolean;
}

const { rule, showFullDetails = false } = Astro.props;
---

<div class="bg-white rounded-lg shadow-lg p-6" id={rule.id}>
  <h2 class="text-xl font-bold mb-4">{rule.title}</h2>
  <p class="text-gray-600 mb-6">{rule.description}</p>

  {
    showFullDetails && (
      <>
        <div class="mb-6">
          <h3 class="text-lg font-semibold mb-3">Étapes à suivre</h3>
          <ol class="list-decimal list-inside space-y-2 text-gray-700">
            {rule.steps.map((step) => (
              <li>{step}</li>
            ))}
          </ol>
        </div>

        <div class="mb-6">
          <h3 class="text-lg font-semibold mb-3">Exemples</h3>
          <div class="space-y-4">
            {rule.examples.map((example) => (
              <div class="bg-gray-50 p-4 rounded-lg">
                <div class="font-mono text-lg mb-2">
                  {example.problem} = {example.solution}
                </div>
                <p class="text-gray-600 text-sm">{example.explanation}</p>
              </div>
            ))}
          </div>
        </div>

        {rule.tips.length > 0 && (
          <div class="bg-blue-50 p-4 rounded-lg">
            <h3 class="text-lg font-semibold mb-2 text-blue-800">Astuces</h3>
            <ul class="list-disc list-inside space-y-1 text-blue-700">
              {rule.tips.map((tip) => (
                <li>{tip}</li>
              ))}
            </ul>
          </div>
        )}
      </>
    )
  }
</div>
